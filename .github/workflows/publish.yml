name: Build

on:
  push:
    branches: [develop]
  release:
    types: [published]
  pull_request:
    branches: [develop]

jobs:
  publish-image:
    name: Build and push Docker image
    uses: swissgrc/.github/.github/workflows/publish-image.yml@64300ea603ac439c79d240c6cc89cd9f0268dcbb
    with:
      image-name: swissgrc/azure-pipelines-dotnet
    secrets:
      gh-token: ${{ secrets.GITHUB_TOKEN }}
      docker-username: ${{ secrets.DOCKER_USERNAME }}
      docker-password: ${{ secrets.DOCKER_PASSWORD }}